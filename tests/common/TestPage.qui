<Control name="TestPage">
    
<prototype>
    <Page title="Test Page">
        
        <p>
            <BasicButton>Button</BasicButton>
            <BasicButton disabled="true">Disabled</BasicButton>
            <ToggleButton>
                Toggle
            </ToggleButton>
            <HasPopup openOnClick="true" closeOnInsideClick="true" style="display: inline-block;">
                <BasicButton>Show popup</BasicButton>
                <popup>
                    Popup content
                </popup>
            </HasPopup>
            <BasicButton id="button">
                Show test dialog
            </BasicButton>
        </p>
        
        <List id="list" itemClass="BasicButton"/>
        
        <Switch id="switch">
            <div>Panel one</div>
            <div>Panel two</div>
            <div>Panel three</div>
        </Switch>
        
        <TabSet id="tabSet" style="height: 100px;">
            <Tab name="Tab A">
                <Switch id="switchAnimals">
                    <div>Aardvark</div>
                    <div>Ant</div>
                    <div>Anteater</div>
                </Switch>
                <BasicButton id="buttonChangeAnimal">Change</BasicButton>
            </Tab>
            <Tab name="Tab B">Bandicoot</Tab>
            <Tab name="Tab C">Chickadee</Tab>
        </TabSet>
        
        <HorizontalPanels id="horiziontalPanels" style="height: 50px;">
            <left>Left</left>
            <content>Horizontal panels</content>
            <right>Right</right>
        </HorizontalPanels>
        
        <VerticalPanels id="verticalPanels" style="height: 200px;">
            <top>Top</top>
            <content>Vertical panels</content>
            <bottom>Bottom</bottom>
        </VerticalPanels>
        
        <BrowserSpecific>
            <webkit>You are using WebKit</webkit>
            <msie>You are using Internet Explorer</msie>
            <mozilla>You are using Firefox</mozilla>
            <default>You are using some unknown browser.</default>
        </BrowserSpecific>
        
        <Control id="shifter">Plain control that's now a button</Control>
        
        <DeviceSpecific>
            <mobile>You're on a mobile device.</mobile>
            <default>You are not on a mobile device.</default>
        </DeviceSpecific>
        
        <ComboBox content="This is a combo box">
            <popup>
                Popup goes here.
            </popup>
        </ComboBox>
        
        <div>
            <TestControl>Test control with no text styling.</TestControl>
            <div>
                <span>
                    Test control <TestControl>with italic text</TestControl> because it's in a span.
                </span>
            </div>
        </div>
    </Page>
</prototype>

<script>
TestPage.prototype.extend({
    
    initialize: function() {

        var self = this;
        
        this.$button().click(function() {
            Dialog.showDialog(TestDialog);
        });
        
        this.$list().items([
            "One",
            "Two",
            "Three"
        ]);
        this.$list().find(".BasicButton").click(function() {
            var button = this;
            var index = self.$list().children().index(button);
            self.$switch().activeIndex(index);
        });
        
        this.$tabSet().bind({
            
            // Raised by any child of a Switch inside the TabSet.
            "active": function( event ) {
                var target = event.target;
                var s = target.nodeName.toLowerCase();
                var $target = $( target );
                var elementClass = $target.attr( "class" );
                if ( elementClass ) {
                    var firstClass = elementClass.split(" ")[0];
                    s += "." + firstClass;
                }
                var id = $target.attr( "id" );
                if ( id ) {
                    s += "#" + id;
                }
                console.log( "Element now active: " + s );
            },
            
            // Raised by a Switch inside the TabSet
            "activeChildChanged": function( event, index, child ) {
                console.log( "Active child changed to: " + index );
            },
            
            // Raised by the TabSet
            "activeTabChanged": function( event, index, tab ) {
                console.log( "Active tab changed to: " + index );
            },
            
            // Raised by the TabSet
            "tabButtonClick": function( event, index, tab ) {
                console.log( "Click on tab: " + index );
            }
            
        });
        this.$buttonChangeAnimal().click( function() {
            var animalIndex = self.$switchAnimals().activeIndex();
            var animalCount = self.$switchAnimals().children().length;
            animalIndex = ( ( animalIndex + 1 ) % animalCount );
            self.$switchAnimals().activeIndex( animalIndex ); 
        });
        
        this.$shifter().transmute(BasicButton, true);
    }

});
</script>

</Control>
